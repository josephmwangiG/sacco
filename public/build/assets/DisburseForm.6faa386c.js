import{r as p,u as b,j as y,o as r,c as g,w as A,b as e,f as i,v as m,e as t,l,t as d,n as u,g as q,m as x,F as B,z as D,d as N,k as V}from"./app.24fde918.js";import w from"./EditApplication.50170ffc.js";import C from"./ApproverForm.5ff1126d.js";const F=e("div",{class:"mt-4"},[e("h5",null,"Disbursement Details"),e("hr",{class:"mt-2"})],-1),M={class:"row"},U={class:"form-group col-md-6"},S=e("label",{for:"disbursement_date"},"Disbursement Date:",-1),L={key:0,class:"text-danger"},j={class:"form-group col-sm-6"},E=e("label",{for:"disburse_method"},"Payment Method:",-1),$=e("option",{value:""},"Select option",-1),z=["value"],I={key:0,class:"text-danger"},O={class:"form-group col-md-6"},P=e("label",{for:"bank_name"},"Bank Name:",-1),T={key:0,class:"text-danger"},G={class:"form-group col-md-6"},H=e("label",{for:"bank_branch"},"Bank branch:",-1),J={key:0,class:"text-danger"},K={class:"form-group col-md-4"},Q=e("label",{for:"account_number"},"Member Account Number:",-1),R={key:0,class:"text-danger"},W={class:"form-group col-md-4"},X=e("label",{for:"cheque_date"},"Cheque Date:",-1),Y={key:0,class:"text-danger"},Z={class:"form-group col-md-4"},ee=e("label",{for:"cheque_number"},"Cheque Number:",-1),te={key:0,class:"text-danger"},oe={class:"row"},se={class:"form-group col-md-12"},ne={class:"form-group"},ae=e("label",{for:"disburse_note"},"Disbursement Note",-1),re={key:0,class:"text-danger"},le={key:0,class:"modal-footer mt-3"},de=e("button",{type:"submit",class:"btn btn-primary"},"Save Details",-1),ie=[de],ue={key:1,class:"modal-footer mt-3"},me=e("button",{type:"button",class:"btn btn-danger"},"Active Loan",-1),ce=[me],he={name:"DisburseForm",props:{loanApplication:Object,users:Object},setup(c){const a=c;let h=p(b({})),o=p(b({disburse_method:a.loanApplication.disburse_method_id,disburse_note:a.loanApplication.disburse_note,mpesa_number:a.loanApplication.mpesa_number,mpesa_first_name:a.loanApplication.mpesa_first_name,mpesa_middle_name:a.loanApplication.mpesa_middle_name,mpesa_last_name:a.loanApplication.mpesa_last_name,cheque_number:a.loanApplication.cheque_number,bank_name:a.loanApplication.member.bank_name,bank_branch:a.loanApplication.member.bank_branch,account_number:a.loanApplication.member.account_number,cheque_date:a.loanApplication.cheque_date,disbursement_date:a.loanApplication.disbursement_date}));const v=y().props.value.paymentMethods,f=_=>{_.target.value=="1"?document.getElementById("bank_div").classList.remove("collapse"):document.getElementById("bank_div").classList.add("collapse")};function k(){o.value.put(route("loanApplications.update.disbusement",a.loanApplication.id),{onSuccess:()=>{}})}return(_,n)=>(r(),g(w,{loanApplication:c.loanApplication,active:"disbursement"},{default:A(()=>[e("form",{onSubmit:n[9]||(n[9]=N(s=>k(),["prevent"]))},[F,e("div",M,[e("div",U,[S,i(e("input",{type:"date",class:"form-control",id:"disbursement_date","onUpdate:modelValue":n[0]||(n[0]=s=>t(o).disbursement_date=s),placeholder:"Bank Branch"},null,512),[[m,t(o).disbursement_date]]),t(o).errors.disbursement_date?(r(),l("div",L,[e("small",null,d(t(o).errors.disbursement_date),1)])):u("",!0)]),e("div",j,[E,i(e("select",{required:"","onUpdate:modelValue":n[1]||(n[1]=s=>t(o).disburse_method=s),class:"form-control",onChange:n[2]||(n[2]=s=>f(s)),id:"disburse_method"},[$,(r(!0),l(B,null,x(t(v),s=>(r(),l("option",{key:s.id,value:s.id},d(s.name),9,z))),128))],544),[[q,t(o).disburse_method]]),t(o).errors.disburse_method?(r(),l("div",I,[e("small",null,d(t(o).errors.disburse_method),1)])):u("",!0)])]),e("div",{class:D(["row",t(o).disburse_method=="1"?"":"collapse"]),id:"bank_div"},[e("div",O,[P,i(e("input",{type:"text",class:"form-control",id:"bank_name","onUpdate:modelValue":n[3]||(n[3]=s=>t(o).bank_name=s),placeholder:"Bank Name"},null,512),[[m,t(o).bank_name]]),t(o).errors.bank_name?(r(),l("div",T,[e("small",null,d(t(o).errors.bank_name),1)])):u("",!0)]),e("div",G,[H,i(e("input",{type:"text",class:"form-control",id:"bank_branch","onUpdate:modelValue":n[4]||(n[4]=s=>t(o).bank_branch=s),placeholder:"Bank Branch"},null,512),[[m,t(o).bank_branch]]),t(o).errors.bank_branch?(r(),l("div",J,[e("small",null,d(t(o).errors.bank_branch),1)])):u("",!0)]),e("div",K,[Q,i(e("input",{type:"text",class:"form-control",id:"account_number","onUpdate:modelValue":n[5]||(n[5]=s=>t(o).account_number=s),placeholder:"Account Number"},null,512),[[m,t(o).account_number]]),t(o).errors.account_number?(r(),l("div",R,[e("small",null,d(t(o).errors.account_number),1)])):u("",!0)]),e("div",W,[X,i(e("input",{type:"date",class:"form-control",id:"cheque_date","onUpdate:modelValue":n[6]||(n[6]=s=>t(o).cheque_date=s),placeholder:"Cheque Date"},null,512),[[m,t(o).cheque_date]]),t(o).errors.cheque_date?(r(),l("div",Y,[e("small",null,d(t(o).errors.cheque_date),1)])):u("",!0)]),e("div",Z,[ee,i(e("input",{type:"text",class:"form-control",id:"cheque_number","onUpdate:modelValue":n[7]||(n[7]=s=>t(o).cheque_number=s),placeholder:"Cheque Number"},null,512),[[m,t(o).cheque_number]]),t(o).errors.cheque_number?(r(),l("div",te,[e("small",null,d(t(o).errors.cheque_number),1)])):u("",!0)])],2),e("div",oe,[e("div",se,[e("div",ne,[ae,i(e("textarea",{class:"form-control","onUpdate:modelValue":n[8]||(n[8]=s=>t(o).disburse_note=s),placeholder:"Disbursement Note",id:"disburse_note",rows:"4"},null,512),[[m,t(o).disburse_note]]),t(o).errors.disburse_note?(r(),l("div",re,[e("small",null,d(t(o).errors.disburse_note),1)])):u("",!0)])])]),c.loanApplication.approved_on==null?(r(),l("div",le,ie)):(r(),l("div",ue,ce))],32),V(C,{approverForm:t(h),users:c.users},null,8,["approverForm","users"])]),_:1},8,["loanApplication"]))}};export{he as default};
