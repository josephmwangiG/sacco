import{r as F,o as h,c as D,w as S,b as t,s as L,e as p,l as y,t as c,p as f,F as x,m as k}from"./app.3bfe1e0a.js";import N from"./EditApplication.e0d17179.js";const w={class:"mt-5"},P=t("h6",{class:"text-white"},"Principle",-1),U=[P],A={key:0,class:"table-responsive"},C={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},I=t("thead",null,[t("tr",null,[t("th",null,"Loan No."),t("th",null,"Current Principle"),t("th",null,"Amount Paid"),t("th",null,"Total Interests"),t("th",null,"Total Penalties"),t("th",null,"Status"),t("th",null,"Due Date")])],-1),q=t("td",null,[t("span",{class:"badge dark-icon-light iq-bg-primary"},"Active")],-1),B=t("td",null,"2024-03-01",-1),$={class:"mt-5"},O=t("h6",{class:"text-white"},"Interest",-1),R=[O],T={key:0,class:"table-responsive"},V={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},j=t("thead",null,[t("tr",null,[t("th",null,"Inst. No"),t("th",null,"Principle"),t("th",null,"Interest"),t("th",null,"Installments"),t("th",null,"Outstanding")])],-1),E={class:"mt-5"},M=t("h6",{class:"text-white"},"Penalties",-1),W=[M],z={key:0,class:"table-responsive"},G=t("table",{id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},[t("thead",null,[t("tr",null,[t("th",null,"Loan No."),t("th",null,"Principle"),t("th",null,"Amount"),t("th",null,"Status"),t("th",null,"Action")])]),t("tbody")],-1),H=[G],X={name:"Accrue",props:{activeLoan:Object,id:Number,payments_sum:Number,months:Number},setup(b){const a=b;let o=F(),s=F("principle");return console.log(a.activeLoan),(()=>{let r=0,n=a.payments_sum,e=0,d=0;const g=a.activeLoan.repayment_period/12,_=a.activeLoan.payment_frequency.display_name;if(_=="Annually"?r=1:_=="semi_annualy"?r=2:_=="quaterly"?r=4:_=="Monthly"?r=12:_=="Weekly"?r=52.1786:_=="daily"&&(r=365),o.value={principle:e,amount_applied:a.activeLoan.amount_approved,periods:r,payments:[]},e=a.activeLoan.amount_approved,a.activeLoan.interest_type.display_name=="Fixed Rate"){let l=e*(a.activeLoan.interest_rate/100)*g,i=Number(e)+Number(l),u=i/(r*g),m=l/(r*g);console.log(l);for(let v=1;v<=a.months;v++)o.value.payments.push({period:v,principle:i,payment_per_month:u,payment_amount:u,payments:n+u,interest:d+m,interest_amount:m}),e=i-u,i=e,n=n+u,d=d+m}else{let l=e/(r*g),i=e*(1+a.activeLoan.interest_rate/100/12);for(let u=1;u<=a.months;u++){e<l&&o.value.payments.push({period:u,principle:i,payment_per_month:l,payment_amount:l+i-e,payments:n+l+i-e,interest:d+i-e,interest_amount:i-e});let m=i-e;o.value.payments.push({period:u,principle:i,payment_per_month:l,payment_amount:l+m,payments:n+l+m,interest:d+m,interest_amount:m}),e=i-(l+m),i=e*(1+a.activeLoan.interest_rate/100/12),n=n+l+m,d=d+m}}})(),(r,n)=>(h(),D(N,{id:b.id,active:"accrue"},{default:S(()=>[t("div",w,[t("div",{class:"card-header bg-primary py-2",onClick:n[0]||(n[0]=e=>L(s)?s.value="principle":s="principle")},U),p(s)=="principle"?(h(),y("div",A,[t("table",C,[I,t("tbody",null,[t("tr",null,[t("td",null,c(p(o).payments[p(o).payments.length-1].period),1),t("td",null,c(p(o).payments[p(o).payments.length-1].principle.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c(b.payments_sum.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c(p(o).payments[p(o).payments.length-1].payment_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c("00.0"),1),q,B])])])])):f("",!0)]),t("div",$,[t("div",{class:"card-header bg-primary py-2",onClick:n[1]||(n[1]=e=>L(s)?s.value="interest":s="interest")},R),p(s)=="interest"?(h(),y("div",T,[t("table",V,[j,t("tbody",null,[(h(!0),y(x,null,k(p(o).payments,(e,d)=>(h(),y("tr",{key:d},[t("td",null,c(e.period),1),t("td",null,c(e.principle.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c(e.interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c(e.payment_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,c((e.principle-e.payment_amount).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1)]))),128))])])])):f("",!0)]),t("div",E,[t("div",{class:"card-header bg-primary py-2",onClick:n[2]||(n[2]=e=>L(s)?s.value="penalties":s="penalties")},W),p(s)=="penalties"?(h(),y("div",z,H)):f("",!0)])]),_:1},8,["id"]))}};export{X as default};
