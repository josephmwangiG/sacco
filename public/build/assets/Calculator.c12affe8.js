import{j as U,r as b,a as w,o as d,c as C,w as k,b as e,l as _,d as M,f as m,g as V,F as q,m as F,t as y,e as x,v}from"./app.3bfe1e0a.js";const P={class:"iq-card"},T=e("div",{class:"iq-card-header d-flex justify-content-between"},[e("div",{class:"iq-header-title"},[e("h4",{class:"card-title"},"Loan Calculator")])],-1),I={key:0,class:"iq-card-body"},B={class:"row"},N={class:"form-group col-md-4"},R=e("label",{for:"loan"},"Loan:",-1),A=e("option",{value:"",selected:""},"Select Loan",-1),E=["value"],j={class:"form-group col-md-4"},O=e("label",{for:"interest_type"},"Interest Type:",-1),W={class:"form-group col-md-4"},$=e("label",{for:"interest"},"Interest:",-1),z={class:"form-group col-md-4"},G=e("label",{for:"service_fee"},"Service Fee:",-1),H={class:"form-group col-md-4"},J=e("label",{for:"rpay"},"Repayment Period (Months):",-1),K={class:"form-group col-md-4"},Q=e("label",{for:"payment_frequency"},"Payment Frequency:",-1),X={class:"form-group col-md-4"},Y=e("label",{for:"amount_applied"},"Amount:",-1),Z=e("div",{class:"modal-footer mt-3"},[e("button",{type:"button",id:"closeModal",class:"btn btn-secondary","data-dismiss":"modal"}," Clear Form "),e("button",{type:"submit",class:"btn btn-primary"},"Calculate")],-1),ee={key:1,class:"iq-card-body"},te=e("a",{class:"iq-bg-primary",href:"#"}," Email ",-1),ne=e("a",{class:"iq-bg-primary",href:"#"}," PDF ",-1),ae={class:"table-responsive"},le={id:"user-list-table",class:"table table-striped table-borderless mt-4",role:"grid","aria-describedby":"user-list-page-info"},oe=e("thead",null,[e("tr",null,[e("th",null,"Inst. No"),e("th",null,"Principle"),e("th",null,"Interest"),e("th",null,"Installments"),e("th",null,"Outstanding")])],-1),re={name:"Calculator",props:{},setup(se){const g=U().props.value.loanTypes,f=b(!1);let c=b();const S=()=>{f.value=!1},a=b({interest:"",penalty:"",p_value:"",service_fee:"",repayment_period:"",payment_frequency:"",amount_applied:"",interest_type:"",loan_type:""}),D=o=>{g.forEach(t=>{t.id==o.target.value&&(a.value={loan_type:t.id,interest:t.interest_rate,penalty:t.penaltyType.display_name,p_value:t.penalty_value,service_fee:t.service_fee,repayment_period:t.repayment_period,amount_applied:"",payment_frequency:t.paymentFrequency.display_name,interest_type:t.interestType.display_name})})},L=()=>{let o=0,t=0,l=0,n=0;const p=a.value.repayment_period/12;if(a.value.payment_frequency=="Annually"?o=1:a.value.payment_frequency=="semi_annualy"?o=2:a.value.payment_frequency=="quaterly"?o=4:a.value.payment_frequency=="Monthly"?o=12:a.value.payment_frequency=="Weekly"?o=52.1786:a.value.payment_frequency=="daily"&&(o=365),c.value={principle:l,amount_applied:a.value.amount_applied,periods:o,payments:[]},a.value.interest_type=="Fixed Rate"){l=a.value.amount_applied;let i=l*(a.value.interest/100)*p,s=Number(l)+Number(i),u=s/(o*p),r=i/(o*p);console.log(i);for(let h=1;h<=o*p;h++)c.value.payments.push({period:h,principle:s,payment_per_month:u,payment_amount:u,payments:t+u,interest:n+r,interest_amount:r}),l=s-u,s=l,t=t+u,n=n+r}else{l=a.value.amount_applied;let i=l/(o*p),s=l*(1+a.value.interest/100/12);for(let u=1;u<=o*p;u++){l<i&&c.value.payments.push({period:u,principle:s,payment_per_month:i,payment_amount:i+s-l,payments:t+i+s-l,interest:n+s-l,interest_amount:s-l});let r=s-l;c.value.payments.push({period:u,principle:s,payment_per_month:i,payment_amount:i+r,payments:t+i+r,interest:n+r,interest_amount:r}),l=s-(i+r),s=l*(1+a.value.interest/100/12),t=t+i+r,n=n+r}}console.log(c.value),f.value=!0};return(o,t)=>{const l=w("Main");return d(),C(l,null,{default:k(()=>[e("div",P,[T,f.value?(d(),_("div",ee,[e("div",{class:"user-list-files text-right"},[te,ne,e("a",{class:"iq-bg-primary",href:"#",onClick:S}," Calculator ")]),e("div",ae,[e("table",le,[oe,e("tbody",null,[(d(!0),_(q,null,F(x(c).payments,(n,p)=>(d(),_("tr",{key:p},[e("td",null,y(n.period),1),e("td",null,y(n.principle.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),e("td",null,y(n.interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),e("td",null,y(n.payment_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),e("td",null,y((n.principle-n.payment_amount).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1)]))),128))])])])])):(d(),_("div",I,[e("form",{onSubmit:t[8]||(t[8]=M(n=>L(),["prevent"]))},[e("div",B,[e("div",N,[R,m(e("select",{onChange:t[0]||(t[0]=n=>D(n)),required:"","onUpdate:modelValue":t[1]||(t[1]=n=>a.value.loan_type=n),class:"form-control",id:"loan"},[A,(d(!0),_(q,null,F(x(g),(n,p)=>(d(),_("option",{value:n.id,key:p},y(n.name),9,E))),128))],544),[[V,a.value.loan_type]])]),e("div",j,[O,m(e("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[2]||(t[2]=n=>a.value.interest_type=n),id:"interest_type",placeholder:"Interest Type"},null,512),[[v,a.value.interest_type]])]),e("div",W,[$,m(e("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[3]||(t[3]=n=>a.value.interest=n),id:"interest",placeholder:"interest"},null,512),[[v,a.value.interest]])]),e("div",z,[G,m(e("input",{type:"text",class:"form-control",id:"service_fee","onUpdate:modelValue":t[4]||(t[4]=n=>a.value.service_fee=n),placeholder:"Service Fee"},null,512),[[v,a.value.service_fee]])]),e("div",H,[J,m(e("input",{type:"text",class:"form-control",id:"rpay","onUpdate:modelValue":t[5]||(t[5]=n=>a.value.repayment_period=n),placeholder:"Repayment Period"},null,512),[[v,a.value.repayment_period]])]),e("div",K,[Q,m(e("input",{type:"text",class:"form-control",id:"payment_frequency","onUpdate:modelValue":t[6]||(t[6]=n=>a.value.payment_frequency=n),placeholder:"Payment Frequency"},null,512),[[v,a.value.payment_frequency]])]),e("div",X,[Y,m(e("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[7]||(t[7]=n=>a.value.amount_applied=n),id:"amount_applied",placeholder:"Loan Amount"},null,512),[[v,a.value.amount_applied]])])]),Z],32)]))])]),_:1})}}};export{re as default};
