import{r as p,u as b,j as A,o as l,c as q,w as x,b as e,l as a,m as h,t as r,F as v,f as d,v as c,e as t,p as u,g as B,z as D,d as w,k as N}from"./app.dc7518d1.js";import C from"./EditApplication.6e22b1e3.js";import V from"./ApproverForm.8bc9cd30.js";const U={class:"my-3"},F={class:"table-responsive w-100"},M=e("div",{class:"d-flex justify-content-between w-100"},[e("h5",null,"List of Approvers"),e("button",{type:"button",class:"btn btn-primary"}," Update List of Approvers ")],-1),S=e("hr",null,null,-1),L={id:"user-list-table",class:"table table-striped table-borderless mt-2 w-100",role:"grid","aria-describedby":"user-list-page-info"},E=e("thead",null,[e("tr",null,[e("th",null,"Profile"),e("th",null,"Name"),e("th",null,"Contact"),e("th",null,"Email"),e("th",null,"Role"),e("th",null,"Approval Status"),e("th",null,"Action")])],-1),$=e("td",{class:"text-center"},[e("img",{class:"rounded-circle img-fluid avatar-40",src:"/images/user/01.jpg",alt:"profile"})],-1),P=e("td",null,[e("span",{class:"badge dark-icon-light iq-bg-primary"},"active")],-1),z={class:"flex align-items-center list-user-action"},I=["onClick"],O=e("i",{class:"ri-delete-bin-line"},null,-1),R=[O],T=e("div",{class:"mt-4"},[e("h5",null,"Disbursement Details"),e("hr",{class:"mt-2"})],-1),G={class:"row"},H={class:"form-group col-md-6"},J=e("label",{for:"disbursement_date"},"Disbursement Date:",-1),K={key:0,class:"text-danger"},Q={class:"form-group col-sm-6"},W=e("label",{for:"disburse_method"},"Payment Method:",-1),X=e("option",{value:""},"Select option",-1),Y=["value"],Z={key:0,class:"text-danger"},j={class:"form-group col-md-6"},ee=e("label",{for:"bank_name"},"Bank Name:",-1),te={key:0,class:"text-danger"},se={class:"form-group col-md-6"},oe=e("label",{for:"bank_branch"},"Bank branch:",-1),ne={key:0,class:"text-danger"},le={class:"form-group col-md-4"},ae=e("label",{for:"account_number"},"Member Account Number:",-1),re={key:0,class:"text-danger"},ie={class:"form-group col-md-4"},de=e("label",{for:"cheque_date"},"Cheque Date:",-1),ue={key:0,class:"text-danger"},ce={class:"form-group col-md-4"},me=e("label",{for:"cheque_number"},"Cheque Number:",-1),_e={key:0,class:"text-danger"},pe={class:"row"},be={class:"form-group col-md-12"},he={class:"form-group"},ve=e("label",{for:"disburse_note"},"Disbursement Note",-1),fe={key:0,class:"text-danger"},ke={key:0,class:"modal-footer mt-3"},ge=e("button",{type:"submit",class:"btn btn-primary"},"Save Details",-1),ye=[ge],Ae={key:1,class:"modal-footer mt-3"},qe=e("button",{type:"button",class:"btn btn-danger"},"Active Loan",-1),xe=[qe],Ce={name:"DisburseForm",props:{loanApplication:Object,users:Object},setup(m){const i=m;let f=p(b({})),s=p(b({disburse_method:i.loanApplication.disburse_method_id,disburse_note:i.loanApplication.disburse_note,mpesa_number:i.loanApplication.mpesa_number,mpesa_first_name:i.loanApplication.mpesa_first_name,mpesa_middle_name:i.loanApplication.mpesa_middle_name,mpesa_last_name:i.loanApplication.mpesa_last_name,cheque_number:i.loanApplication.cheque_number,bank_name:i.loanApplication.member.bank_name,bank_branch:i.loanApplication.member.bank_branch,account_number:i.loanApplication.member.account_number,cheque_date:i.loanApplication.cheque_date,disbursement_date:i.loanApplication.disbursement_date}));const k=A().props.value.paymentMethods,g=_=>{_.target.value=="1"?document.getElementById("bank_div").classList.remove("collapse"):document.getElementById("bank_div").classList.add("collapse")};function y(){s.value.put(route("loanApplications.update.disbusement",i.loanApplication.id),{onSuccess:()=>{}})}return(_,n)=>(l(),q(C,{loanApplication:m.loanApplication,active:"disbursement"},{default:x(()=>[e("div",U,[e("div",F,[M,S,e("table",L,[E,e("tbody",null,[(l(!0),a(v,null,h(m.users,o=>(l(),a("tr",{key:o.id},[$,e("td",null,r(o.first_name)+" "+r(o.last_name),1),e("td",null,r(o.phone),1),e("td",null,r(o.email),1),e("td",null,r(o.role.name),1),P,e("td",null,[e("div",z,[e("a",{class:"iq-bg-primary","data-toggle":"modal","data-placement":"top",onClick:Be=>_.url=_.route("deposits.destroy",o.id),"data-original-title":"Delete",href:"#confirm"},R,8,I)])])]))),128))])])])]),e("form",{onSubmit:n[9]||(n[9]=w(o=>y(),["prevent"]))},[T,e("div",G,[e("div",H,[J,d(e("input",{type:"date",class:"form-control",id:"disbursement_date","onUpdate:modelValue":n[0]||(n[0]=o=>t(s).disbursement_date=o),placeholder:"Bank Branch"},null,512),[[c,t(s).disbursement_date]]),t(s).errors.disbursement_date?(l(),a("div",K,[e("small",null,r(t(s).errors.disbursement_date),1)])):u("",!0)]),e("div",Q,[W,d(e("select",{required:"","onUpdate:modelValue":n[1]||(n[1]=o=>t(s).disburse_method=o),class:"form-control",onChange:n[2]||(n[2]=o=>g(o)),id:"disburse_method"},[X,(l(!0),a(v,null,h(t(k),o=>(l(),a("option",{key:o.id,value:o.id},r(o.name),9,Y))),128))],544),[[B,t(s).disburse_method]]),t(s).errors.disburse_method?(l(),a("div",Z,[e("small",null,r(t(s).errors.disburse_method),1)])):u("",!0)])]),e("div",{class:D(["row",t(s).disburse_method=="1"?"":"collapse"]),id:"bank_div"},[e("div",j,[ee,d(e("input",{type:"text",class:"form-control",id:"bank_name","onUpdate:modelValue":n[3]||(n[3]=o=>t(s).bank_name=o),placeholder:"Bank Name"},null,512),[[c,t(s).bank_name]]),t(s).errors.bank_name?(l(),a("div",te,[e("small",null,r(t(s).errors.bank_name),1)])):u("",!0)]),e("div",se,[oe,d(e("input",{type:"text",class:"form-control",id:"bank_branch","onUpdate:modelValue":n[4]||(n[4]=o=>t(s).bank_branch=o),placeholder:"Bank Branch"},null,512),[[c,t(s).bank_branch]]),t(s).errors.bank_branch?(l(),a("div",ne,[e("small",null,r(t(s).errors.bank_branch),1)])):u("",!0)]),e("div",le,[ae,d(e("input",{type:"text",class:"form-control",id:"account_number","onUpdate:modelValue":n[5]||(n[5]=o=>t(s).account_number=o),placeholder:"Account Number"},null,512),[[c,t(s).account_number]]),t(s).errors.account_number?(l(),a("div",re,[e("small",null,r(t(s).errors.account_number),1)])):u("",!0)]),e("div",ie,[de,d(e("input",{type:"date",class:"form-control",id:"cheque_date","onUpdate:modelValue":n[6]||(n[6]=o=>t(s).cheque_date=o),placeholder:"Cheque Date"},null,512),[[c,t(s).cheque_date]]),t(s).errors.cheque_date?(l(),a("div",ue,[e("small",null,r(t(s).errors.cheque_date),1)])):u("",!0)]),e("div",ce,[me,d(e("input",{type:"text",class:"form-control",id:"cheque_number","onUpdate:modelValue":n[7]||(n[7]=o=>t(s).cheque_number=o),placeholder:"Cheque Number"},null,512),[[c,t(s).cheque_number]]),t(s).errors.cheque_number?(l(),a("div",_e,[e("small",null,r(t(s).errors.cheque_number),1)])):u("",!0)])],2),e("div",pe,[e("div",be,[e("div",he,[ve,d(e("textarea",{class:"form-control","onUpdate:modelValue":n[8]||(n[8]=o=>t(s).disburse_note=o),placeholder:"Disbursement Note",id:"disburse_note",rows:"4"},null,512),[[c,t(s).disburse_note]]),t(s).errors.disburse_note?(l(),a("div",fe,[e("small",null,r(t(s).errors.disburse_note),1)])):u("",!0)])])]),m.loanApplication.approved_on==null?(l(),a("div",ke,ye)):(l(),a("div",Ae,xe))],32),N(V,{approverForm:t(f),users:m.users},null,8,["approverForm","users"])]),_:1},8,["loanApplication"]))}};export{Ce as default};
