import{r as g,o as D,l as S,b as t,i as r,t as e,e as y}from"./app.dc7518d1.js";const F={class:"modal fade",id:"loanStatement",tabindex:"-1",role:"dialog","aria-labelledby":"loanStatement","aria-hidden":"true"},x={class:"modal-dialog modal-lg",role:"document"},w={class:"modal-content"},B=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"loanStatement"},"Loan Statement."),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),P={class:"modal-body modal-div"},M={class:"row"},A={class:"col-md-6"},C=t("h6",null,"Member Details",-1),N=t("b",null,"Name:",-1),I=t("br",null,null,-1),O=t("b",null,"Account:",-1),U=t("br",null,null,-1),k=t("b",null,"Phone:",-1),q=t("br",null,null,-1),T=t("b",null,"Branch:",-1),E={class:"col-md-6"},R=t("h6",null,"Member Details",-1),V=t("b",null,"Ref number:",-1),Y=t("br",null,null,-1),j=t("b",null,"Start date:",-1),W=t("div",{class:"col-12"},[t("hr")],-1),z={class:"table-responsive"},G={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},H=t("thead",null,[t("tr",null,[t("th",null,"Effective Date"),t("th",null,"Amount"),t("th",null,"Activity Description"),t("th",null,"Principle Bal"),t("th",null,"Interest / Fee")])],-1),J=t("td",null,"Opening Loan Balance",-1),K=t("td",null,null,-1),Q=t("td",null,"Opening Interest",-1),X=t("td",null,null,-1),Z=t("td",null,null,-1),$=t("td",null,null,-1),tt=t("td",null,null,-1),et=t("td",null,"2000",-1),nt=t("tr",null,[t("td",null,"2021"),t("td",null,"1000"),t("td",null,"Closing Balance"),t("td"),t("td",null,"2000")],-1),lt={class:"table-responsive mt-3"},at=t("h5",null,"Payment Summary",-1),ot={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},it=t("thead",null,[t("tr",null,[t("th",null,"Loan No."),t("th",null,"Principle"),t("th",null,"Past Due Principle"),t("th",null,"Current Interest / Fee"),t("th",null,"Past Interest / Fee"),t("th",null,"Total Due")])],-1),st={class:"details row my-4"},ct={class:"col-6"},rt=r(" Loan Customer "),dt=t("br",null,null,-1),ut=t("div",{class:"col-6"},[r(" Statement Date: 01/04/07 "),t("br"),r(" Payment Due Date: 01/14/O7 "),t("br"),r(" Amount Due: 1,736.77 ")],-1),mt=t("div",{class:"modal-footer"},[t("button",{type:"button",id:"closeModal",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),t("button",{type:"submit",class:"btn btn-primary"},"Download")],-1),bt={name:"Statement",props:{activeLoan:Object},setup(n){const i=n;let _=g("");var b=new Date,L=new Date(b.getFullYear(),b.getMonth()-1,1),f=new Date(b.getFullYear(),b.getMonth(),0);return console.log(L+"==="+f),(()=>{let s=0,u=i.activeLoan.payment_sum,l=0,m=0;console.log(u);const v=i.activeLoan.repayment_period/12,h=i.activeLoan.paymentFrequency.display_name;if(h=="Annually"?s=1:h=="semi_annualy"?s=2:h=="quaterly"?s=4:h=="Monthly"?s=12:h=="Weekly"?s=52.1786:h=="daily"&&(s=365),_.value={principle:l,amount_applied:i.activeLoan.amount_approved,periods:s,payments:[]},l=i.activeLoan.amount_approved,i.activeLoan.interestType.display_name=="Fixed Rate"){let o=l*(i.activeLoan.interest_rate/100)*v,a=Number(l)+Number(o),d=a/(s*v),c=o/(s*v);for(let p=1;p<=i.activeLoan.repayment_period;p++)_.value.payments.push({period:p,principle:a,payment_per_month:d,payment_amount:d,payments:u+d,interest:m+c,interest_amount:c}),l=a-d,a=l,u=u+d,m=m+c}else{let o=l/(s*v),a=l*(1+i.activeLoan.interest_rate/100/12);for(let d=1;d<=i.activeLoan.repayment_period;d++){l<o&&_.value.payments.push({period:d,principle:a,payment_per_month:o,payment_amount:o+a-l,payments:u+o+a-l,interest:m+a-l,interest_amount:a-l});let c=a-l;_.value.payments.push({period:d,principle:a,payment_per_month:o,payment_amount:o+c,payments:u+o+c,interest:m+c,interest_amount:c}),l=a-(o+c),a=l*(1+i.activeLoan.interest_rate/100/12),u=u+o+c,m=m+c}}})(),(s,u)=>(D(),S("div",F,[t("div",x,[t("div",w,[B,t("div",P,[t("div",M,[t("div",A,[C,t("p",null,[N,r(" "+e(n.activeLoan.member.first_name)+" "+e(n.activeLoan.member.last_name)+" ",1),I,O,r(" "+e(n.activeLoan.account.account_number)+" ",1),U,k,r(" "+e(n.activeLoan.member.phone)+" ",1),q,T,r(" "+e(n.activeLoan.branch.name),1)])]),t("div",E,[R,t("p",null,[V,r(" "+e(n.activeLoan.loan_reference_number)+" ",1),Y,j,r(" "+e(n.activeLoan.start_date),1)])]),W]),t("div",z,[t("table",G,[H,t("tbody",null,[t("tr",null,[t("td",null,e(n.activeLoan.start_date),1),t("td",null,e(n.activeLoan.amount_approved.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),J,t("td",null,e(n.activeLoan.amount_approved.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),K]),t("tr",null,[t("td",null,e(n.activeLoan.start_date),1),t("td",null,e(y(_).payments[0].interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),Q,X,t("td",null,e(y(_).payments[0].interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1)]),t("tr",null,[Z,$,t("td",null,"Interest from "+e(n.activeLoan.start_date)+" to Date B",1),tt,et]),nt])])]),t("div",lt,[at,t("table",ot,[it,t("tbody",null,[t("tr",null,[t("td",null,e(n.activeLoan.loan_reference_number),1),t("td",null,e(n.activeLoan.loan_reference_number),1),t("td",null,e(n.activeLoan.loan_reference_number),1),t("td",null,e(n.activeLoan.loan_reference_number),1),t("td",null,e(n.activeLoan.loan_reference_number),1),t("td",null,e(n.activeLoan.loan_reference_number),1)])])]),t("div",st,[t("div",ct,[rt,dt,r(" Member A/C: "+e(n.activeLoan.account.account_number),1)]),ut])])]),mt])])]))}};export{bt as default};
