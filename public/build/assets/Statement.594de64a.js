import{r as S,o as y,l as L,b as t,i as c,t as n,e as g,F,m as x}from"./app.a4fe3c50.js";const w={class:"modal fade",id:"loanStatement",tabindex:"-1",role:"dialog","aria-labelledby":"loanStatement","aria-hidden":"true"},B={class:"modal-dialog modal-xl modal-dialog-scrollable",role:"document"},M={class:"modal-content"},A=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"loanStatement"},"Loan Statement."),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),N={class:"modal-body"},C={class:"row w-100"},P={class:"col-md-6"},k=t("h6",null,"Member Details",-1),O=t("b",null,"Name:",-1),U=t("br",null,null,-1),q=t("b",null,"Account:",-1),I=t("br",null,null,-1),R=t("b",null,"Phone:",-1),E=t("br",null,null,-1),T=t("b",null,"Branch:",-1),V={class:"col-md-6"},Y=t("h6",null,"Member Details",-1),W=t("b",null,"Ref number:",-1),z=t("br",null,null,-1),G=t("b",null,"Start date:",-1),H=t("div",{class:"col-12"},[t("hr")],-1),J={class:"table-responsive"},K={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},Q=t("thead",null,[t("tr",null,[t("th",null,"Effective Date"),t("th",null,"Amount"),t("th",null,"Activity Description"),t("th",null,"Principle Bal"),t("th",null,"Interest / Fee")])],-1),X=t("td",null,"Opening Loan Balance",-1),Z=t("td",null,null,-1),$=t("td",null,"Opening Interest",-1),j=t("td",null,null,-1),tt=t("td",null,null,-1),et=t("td",null,null,-1),nt=t("td",null,null,-1),at=t("td",null,"2000",-1),lt=t("tr",null,[t("td",null,"2021"),t("td",null,"1000"),t("td",null,"Closing Balance"),t("td"),t("td",null,"2000")],-1),ot={class:"table-responsive mt-3"},st=t("h5",null,"Payment Summary",-1),it={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},dt=t("thead",null,[t("tr",null,[t("th",null,"Receipt No."),t("th",null,"Payment Date"),t("th",null,"Method"),t("th",null,"Amount")])],-1),ct={class:"details row my-4"},rt={class:"col-6"},ut=c(" Loan Customer "),mt=t("br",null,null,-1),_t=t("div",{class:"col-6"},[c(" Statement Date: 01/04/07 "),t("br"),c(" Payment Due Date: 01/14/O7 "),t("br"),c(" Amount Due: 1,736.77 ")],-1),ht=t("div",{class:"modal-footer"},[t("button",{type:"button",id:"closeModal",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),t("button",{type:"submit",class:"btn btn-primary"},"Download")],-1),vt={name:"Statement",props:{activeLoan:Object},setup(a){const s=a;let _=S("");var p=new Date,f=new Date(p.getFullYear(),p.getMonth()-1,1),D=new Date(p.getFullYear(),p.getMonth(),0);return console.log(f+"==="+D),(()=>{let i=0,u=s.activeLoan.payment_sum,e=0,m=0;console.log(u);const b=s.activeLoan.repayment_period/12,h=s.activeLoan.paymentFrequency.display_name;if(h=="Annually"?i=1:h=="semi_annualy"?i=2:h=="quaterly"?i=4:h=="Monthly"?i=12:h=="Weekly"?i=52.1786:h=="daily"&&(i=365),_.value={principle:e,amount_applied:s.activeLoan.amount_approved,periods:i,payments:[]},e=s.activeLoan.amount_approved,s.activeLoan.interestType.display_name=="Fixed Rate"){let o=e*(s.activeLoan.interest_rate/100)*b,l=Number(e)+Number(o),r=l/(i*b),d=o/(i*b);for(let v=1;v<=s.activeLoan.repayment_period;v++)_.value.payments.push({period:v,principle:l,payment_per_month:r,payment_amount:r,payments:u+r,interest:m+d,interest_amount:d}),e=l-r,l=e,u=u+r,m=m+d}else{let o=e/(i*b),l=e*(1+s.activeLoan.interest_rate/100/12);for(let r=1;r<=s.activeLoan.repayment_period;r++){e<o&&_.value.payments.push({period:r,principle:l,payment_per_month:o,payment_amount:o+l-e,payments:u+o+l-e,interest:m+l-e,interest_amount:l-e});let d=l-e;_.value.payments.push({period:r,principle:l,payment_per_month:o,payment_amount:o+d,payments:u+o+d,interest:m+d,interest_amount:d}),e=l-(o+d),l=e*(1+s.activeLoan.interest_rate/100/12),u=u+o+d,m=m+d}}})(),(i,u)=>(y(),L("div",w,[t("div",B,[t("div",M,[A,t("div",N,[t("div",C,[t("div",P,[k,t("p",null,[O,c(" "+n(a.activeLoan.member.user.first_name)+" "+n(a.activeLoan.member.user.last_name)+" ",1),U,q,c(" "+n(a.activeLoan.account.account_number)+" ",1),I,R,c(" "+n(a.activeLoan.member.user.phone)+" ",1),E,T,c(" "+n(a.activeLoan.branch.name),1)])]),t("div",V,[Y,t("p",null,[W,c(" "+n(a.activeLoan.loan_reference_number)+" ",1),z,G,c(" "+n(a.activeLoan.start_date),1)])]),H]),t("div",J,[t("table",K,[Q,t("tbody",null,[t("tr",null,[t("td",null,n(a.activeLoan.start_date),1),t("td",null,n(a.activeLoan.amount_approved.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),X,t("td",null,n(a.activeLoan.amount_approved.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),Z]),t("tr",null,[t("td",null,n(a.activeLoan.start_date),1),t("td",null,n(g(_).payments[0].interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),$,j,t("td",null,n(g(_).payments[0].interest_amount.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1)]),t("tr",null,[tt,et,t("td",null,"Interest from "+n(a.activeLoan.start_date)+" to Date B",1),nt,at]),lt])])]),t("div",ot,[st,t("table",it,[dt,t("tbody",null,[(y(!0),L(F,null,x(a.activeLoan.payments,e=>(y(),L("tr",{key:e.id},[t("td",null,n(e.receipt_number),1),t("td",null,n(e.payment_date),1),t("td",null,n(e.method_id),1),t("td",null,n(e.amount),1)]))),128))])]),t("div",ct,[t("div",rt,[ut,mt,c(" Member A/C: "+n(a.activeLoan.account.account_number),1)]),_t])])]),ht])])]))}};export{vt as default};
