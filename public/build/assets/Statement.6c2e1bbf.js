import{f as F}from"./utils.7dce455c.js";import{r as w,o as p,l as h,b as t,i as c,t as n,F as f,m as g,e as M}from"./app.a9a0490e.js";const x={class:"modal fade",id:"loanStatement",tabindex:"-1",role:"dialog","aria-labelledby":"loanStatement","aria-hidden":"true"},A={class:"modal-dialog modal-xl modal-dialog-scrollable",role:"document"},N={class:"modal-content"},k=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"loanStatement"},"Loan Statement."),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),B={class:"modal-body"},P={class:"row w-100"},C={class:"col-md-6"},q=t("h6",null,"Member Details",-1),R=t("b",null,"Name:",-1),E=t("br",null,null,-1),O=t("b",null,"Account:",-1),T=t("br",null,null,-1),U=t("b",null,"Phone:",-1),V=t("br",null,null,-1),Y=t("b",null,"Branch:",-1),W={class:"col-md-6"},z=t("h6",null,"Member Details",-1),G=t("b",null,"Ref number:",-1),H=t("br",null,null,-1),I=t("b",null,"Start date:",-1),J=t("div",{class:"col-12"},[t("hr")],-1),K={class:"table-responsive"},Q={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},X=t("thead",null,[t("tr",null,[t("th",null,"Effective Date"),t("th",null,"Amount"),t("th",null,"Activity Description"),t("th",null,"Principle Bal")])],-1),Z={class:"table-responsive mt-3"},$=t("h5",null,"Payment Summary",-1),j={id:"user-list-table",class:"table table-striped table-borderless mt-2",role:"grid"},tt=t("thead",null,[t("tr",null,[t("th",null,"Receipt No."),t("th",null,"Payment Date"),t("th",null,"Method"),t("th",null,"Amount")])],-1),et={class:"details row my-4"},nt={class:"col-6"},at=c(" Loan Customer "),lt=t("br",null,null,-1),ot=t("div",{class:"col-6"},[c(" Statement Date: 01/04/07 "),t("br"),c(" Payment Due Date: 01/14/O7 "),t("br"),c(" Amount Due: 1,736.77 ")],-1),st=t("div",{class:"modal-footer"},[t("button",{type:"button",id:"closeModal",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),t("button",{type:"submit",class:"btn btn-primary"},"Download")],-1),dt={name:"Statement",props:{activeLoan:Object},setup(s){const l=s;console.log(l.activeLoan);let b=w("");var y=new Date,D=new Date(y.getFullYear(),y.getMonth()-1,1),S=new Date(y.getFullYear(),y.getMonth(),0);return console.log(D+"==="+S),(()=>{let i=0,m=l.activeLoan.payment_sum,e=0,u=0;console.log(m);const v=l.activeLoan.repayment_period/12,_=l.activeLoan.paymentFrequency.display_name;if(_=="Annually"?i=1:_=="semi_annualy"?i=2:_=="quaterly"?i=4:_=="Monthly"?i=12:_=="Weekly"?i=52.1786:_=="daily"&&(i=365),b.value={principle:e,amount_applied:l.activeLoan.amount_approved,periods:i,payments:[]},e=l.activeLoan.amount_approved,l.activeLoan.interestType.display_name=="Fixed Rate"){let o=e*(l.activeLoan.interest_rate/100)*v,a=Number(e)+Number(o),d=a/(i*v),r=o/(i*v);for(let L=1;L<=l.activeLoan.repayment_period;L++)b.value.payments.push({period:L,principle:a,payment_per_month:d,payment_amount:d,payments:m+d,interest:u+r,interest_amount:r}),e=a-d,a=e,m=m+d,u=u+r}else{let o=e/(i*v),a=e*(1+l.activeLoan.interest_rate/100/12);for(let d=1;d<=l.activeLoan.repayment_period;d++){e<o&&b.value.payments.push({period:d,principle:a,payment_per_month:o,payment_amount:o+a-e,payments:m+o+a-e,interest:u+a-e,interest_amount:a-e});let r=a-e;b.value.payments.push({period:d,principle:a,payment_per_month:o,payment_amount:o+r,payments:m+o+r,interest:u+r,interest_amount:r}),e=a-(o+r),a=e*(1+l.activeLoan.interest_rate/100/12),m=m+o+r,u=u+r}}})(),(i,m)=>(p(),h("div",x,[t("div",A,[t("div",N,[k,t("div",B,[t("div",P,[t("div",C,[q,t("p",null,[R,c(" "+n(s.activeLoan.member.user.first_name)+" "+n(s.activeLoan.member.user.last_name)+" ",1),E,O,c(" "+n(s.activeLoan.account.account_number)+" ",1),T,U,c(" "+n(s.activeLoan.member.user.phone)+" ",1),V,Y,c(" "+n(s.activeLoan.branch.name),1)])]),t("div",W,[z,t("p",null,[G,c(" "+n(s.activeLoan.loan_reference_number)+" ",1),H,I,c(" "+n(s.activeLoan.start_date),1)])]),J]),t("div",K,[t("table",Q,[X,t("tbody",null,[(p(!0),h(f,null,g(s.activeLoan.statements,e=>(p(),h("tr",{key:e.id},[t("td",null,n(M(F)(e.posting_date)),1),t("td",null,n(Math.round(e.debit_amount,2).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1),t("td",null,n(e.description),1),t("td",null,n(Number(e.loan_balance).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})+"0"),1)]))),128))])])]),t("div",Z,[$,t("table",j,[tt,t("tbody",null,[(p(!0),h(f,null,g(s.activeLoan.payments,e=>(p(),h("tr",{key:e.id},[t("td",null,n(e.receipt_number),1),t("td",null,n(e.payment_date),1),t("td",null,n(e.method_id),1),t("td",null,n(e.amount),1)]))),128))])]),t("div",et,[t("div",nt,[at,lt,c(" Member A/C: "+n(s.activeLoan.account.account_number),1)]),ot])])]),st])])]))}};export{dt as default};
