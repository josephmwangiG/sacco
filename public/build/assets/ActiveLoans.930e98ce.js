import{r,u as q,q as M,a as u,o as n,c as m,w as b,b as e,f as B,v as A,e as o,s as h,l as c,m as g,t as a,k as p,F as y,n as L,i as f,x as N}from"./app.a9a0490e.js";import T from"./Amortization.66819c4e.js";import V from"./Statement.6c2e1bbf.js";import{d as D}from"./debounce.559dd8f5.js";import{f as F}from"./utils.7dce455c.js";import"./_baseGetTag.7ab3fb4a.js";const I={class:"row"},$={class:"col-sm-12"},H={class:"iq-card"},O=e("div",{class:"iq-card-header d-flex justify-content-between"},[e("div",{class:"iq-header-title"},[e("h4",{class:"card-title"},"Active Loan")])],-1),P={class:"iq-card-body"},U={class:"row justify-content-between"},z={class:"col-sm-12 col-md-5"},E={id:"user_list_datatable_info",class:"dataTables_filter"},R={class:"mr-3 position-relative"},G={class:"form-group mb-0"},J={class:"col-sm-12 col-md-7"},K={class:"user-list-files d-flex float-right"},Q=["href"],W={class:"table-responsive"},X={id:"user-list-table",class:"table table-striped table-borderless mt-4",role:"grid","aria-describedby":"user-list-page-info"},Y=e("thead",null,[e("tr",null,[e("th",null,"No."),e("th",null,"Member"),e("th",null,"Loan"),e("th",null,"Start Date"),e("th",null,"Interest"),e("th",null,"Amount"),e("th",null,"Balance"),e("th",null,"Status"),e("th",null,"Action")])],-1),Z=e("td",null,[e("span",{class:"badge dark-icon-light iq-bg-primary"},"Active")],-1),j={class:"flex align-items-center list-user-action"},ee={class:"dropdown"},te=e("span",{class:"",id:"dropdownMenuButton2","data-toggle":"dropdown"},[e("strong",null,[e("i",{class:"ri-more-fill"})])],-1),se={class:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuButton2",style:{}},ae=e("i",{class:"ri-eye-fill mr-2"},null,-1),ne=f(" View"),oe=["onClick"],ie=e("i",{class:"ri-printer-fill mr-2"},null,-1),le=f("Amortization"),re=[ie,le],ce=["onClick"],de=e("i",{class:"ri-file-download-fill mr-2"},null,-1),_e=f("Statement"),ue=[de,_e],me={class:"row justify-content-between mt-3"},he={id:"user-list-page-info",class:"col-md-6"},pe={class:"col-md-6"},fe={"aria-label":"Page navigation example"},ve={class:"pagination justify-content-end mb-0"},xe={name:"ActiveLoans",props:{activeLoans:Object,filters:Object},setup(i){let l=r(i.filters.search),s=r(""),k=r("");return r("Create"),r(0),r(q({member:"",loan_officer:"",loan_type:"",reduce_principal_early:"",amount_applied:"",periodic_payment_amount:"",application_date:"",disburse_method:"",disburse_note:"",mpesa_number:"",mpesa_first_name:"",mpesa_middle_name:"",mpesa_last_name:"",cheque_number:"",bank_name:"",bank_branch:"",cheque_date:"",witness_type:"",witness_first_name:"",witness_last_name:"",witness_country:"",witness_county:"",witness_city:"",witness_national_id:"",witness_phone:"",witness_email:"",witness_postal_address:"",witness_residential_address:"",witnessed_by:"",reviewed_by:"",reviewed_on:"",approved_on:"",rejected_on:"",rejection_notes:"",attach_application_form:""})),M(l,D(d=>{N.Inertia.get(route("activeLoans.index"),{search:l.value},{preserveState:!0,replace:!0})},500)),(d,v)=>{const w=u("Link"),S=u("Confirm"),x=u("Main");return n(),m(x,null,{default:b(()=>[e("div",I,[e("div",$,[e("div",H,[O,e("div",P,[e("div",U,[e("div",z,[e("div",E,[e("form",R,[e("div",G,[B(e("input",{type:"search","onUpdate:modelValue":v[0]||(v[0]=t=>h(l)?l.value=t:l=t),class:"form-control",id:"exampleInputSearch",placeholder:"Search","aria-controls":"user-list-table"},null,512),[[A,o(l)]])])])])]),e("div",J,[e("div",K,[e("a",{class:"iq-bg-primary",href:d.route("pdf.loans")}," Print ",8,Q)])])]),e("div",W,[e("table",X,[Y,e("tbody",null,[(n(!0),c(y,null,g(i.activeLoans.data,(t,_)=>(n(),c("tr",{key:_},[e("td",null,a(t.loan_reference_number),1),e("td",null,a(t.user.first_name)+" "+a(t.user.last_name),1),e("td",null,a(t.loanType.name),1),e("td",null,a(o(F)(t.start_date.substring(0,10))),1),e("td",null,a(t.interest_rate),1),e("td",null,a(Number(t.amount_approved).toLocaleString("en-US")),1),e("td",null,a((t.amount_approved-t.payment_sum).toLocaleString()),1),Z,e("td",null,[e("div",j,[e("div",ee,[te,e("div",se,[p(w,{class:"dropdown-item",href:d.route("activeLoans.edit",t.id)},{default:b(()=>[ae,ne]),_:2},1032,["href"]),e("a",{class:"dropdown-item",onClick:C=>h(s)?s.value=t:s=t,href:"#formModal","data-toggle":"modal"},re,8,oe),e("a",{class:"dropdown-item",href:"#loanStatement",onClick:C=>h(s)?s.value=t:s=t,"data-toggle":"modal"},ue,8,ce)])])])])]))),128))])])]),e("div",me,[e("div",he,[e("span",null,"Showing 1 to "+a(i.activeLoans.total>10?"10":i.activeLoans.total)+" of "+a(i.activeLoans.total)+" entries",1)]),e("div",pe,[e("nav",fe,[e("ul",ve,[(n(!0),c(y,null,g(i.activeLoans.links,(t,_)=>(n(),c("li",{class:"page-item active",key:_},[p(w,{class:"page-link",href:t.url,innerHTML:t.label},null,8,["href","innerHTML"])]))),128))])])])])])])])]),p(S,{url:o(k)},null,8,["url"]),o(s)!=""?(n(),m(T,{key:0,activeLoan:o(s)},null,8,["activeLoan"])):L("",!0),o(s)!=""?(n(),m(V,{key:1,activeLoan:o(s)},null,8,["activeLoan"])):L("",!0)]),_:1})}}};export{xe as default};
